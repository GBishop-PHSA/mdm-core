import uk.ac.ox.softeng.maurodatamapper.datamodel.DataModel
import uk.ac.ox.softeng.maurodatamapper.datamodel.item.DataClass
import uk.ac.ox.softeng.maurodatamapper.security.UserSecurityPolicyManager

inherits template: '/dataModel/fullDataModel', model: [dataModel                : dataModel,
                                                       userSecurityPolicyManager: userSecurityPolicyManager]

model {
    DataModel dataModel
    UserSecurityPolicyManager userSecurityPolicyManager
}

List<DataClass> dataClasses = dataModel.getChildDataClasses()

json {
    dataTypes tmpl.'/dataType/fullDataType'('dataType',
                                            dataModel.getSortedDataTypes(),
                                            [userSecurityPolicyManager: userSecurityPolicyManager]
    )
    childDataClasses tmpl.'/dataClass/deepDataClass'(
        dataClasses,
        [userSecurityPolicyManager: userSecurityPolicyManager]
    )
}

